@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 262 83% 58%;
    --primary-foreground: 0 0% 100%;
    --primary-light: 262 83% 96%;

    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    --accent: 262 83% 58%;
    --accent-foreground: 0 0% 100%;

    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;

    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --input-background: 210 40% 98%;
    --ring: 262 83% 58%;

    --radius: 0.5rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-border: 214 32% 91%;
    --sidebar-primary: 262 83% 58%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 262 83% 96%;
    --sidebar-accent-foreground: 262 83% 30%;
    --sidebar-ring: 262 83% 58%;
  }

  .dark {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 10%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 12%;
    --popover-foreground: 210 40% 98%;

    --primary: 262 83% 65%;
    --primary-foreground: 0 0% 100%;
    --primary-light: 262 40% 20%;

    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;

    --accent: 262 83% 65%;
    --accent-foreground: 0 0% 100%;

    --success: 142 76% 42%;
    --success-foreground: 0 0% 100%;

    --warning: 38 92% 55%;
    --warning-foreground: 0 0% 0%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 217 33% 25%;
    --input: 217 33% 25%;
    --input-background: 217 33% 14%;
    --ring: 262 83% 65%;

    --sidebar-background: 222 47% 8%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 20%;
    --sidebar-primary: 262 83% 65%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 262 40% 20%;
    --sidebar-accent-foreground: 262 83% 80%;
    --sidebar-ring: 262 83% 65%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }
}

/* ============================== */
/* Ant Design - Layout & Menu     */
/* ============================== */
.ant-layout {
  background: hsl(var(--background)) !important;
}

.ant-layout-sider {
  background: hsl(var(--sidebar-background)) !important;
  border-right: 1px solid hsl(var(--border)) !important;
}

.ant-menu {
  background: transparent !important;
  border-inline-end: none !important;
  color: hsl(var(--foreground)) !important;
}

.ant-menu-item {
  border-radius: 8px !important;
  margin: 4px 12px !important;
  width: calc(100% - 24px) !important;
  color: hsl(var(--foreground)) !important;
  overflow: hidden !important;
}

.ant-menu-item::after {
  border-right: none !important;
}

.ant-menu-title-content {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ant-menu-item:hover {
  background: hsl(var(--muted)) !important;
}

.ant-menu-item-selected {
  background: hsl(var(--sidebar-accent)) !important;
  color: hsl(var(--sidebar-primary)) !important;
}

/* ============================== */
/* Ant Design - Buttons           */
/* ============================== */
.ant-btn-primary {
  background: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

.ant-btn-primary:hover {
  background: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  opacity: 0.9;
}

.ant-btn-default {
  background: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-btn-default:hover {
  border-color: hsl(var(--primary)) !important;
  color: hsl(var(--primary)) !important;
  background: hsl(var(--card)) !important;
}

.ant-btn-text {
  color: hsl(var(--foreground)) !important;
}

.ant-btn-text:hover {
  background: hsl(var(--muted)) !important;
}

/* ============================== */
/* Ant Design - Steps             */
/* ============================== */
.ant-steps-item-process .ant-steps-item-icon {
  background: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
}

.ant-steps-item-finish .ant-steps-item-icon {
  border-color: hsl(var(--primary)) !important;
}

.ant-steps-item-finish .ant-steps-item-icon > .ant-steps-icon {
  color: hsl(var(--primary)) !important;
}

.ant-steps-item-finish > .ant-steps-item-container > .ant-steps-item-content > .ant-steps-item-title::after {
  background-color: hsl(var(--primary)) !important;
}

/* ============================== */
/* Ant Design - Cards             */
/* ============================== */
.ant-card {
  background: hsl(var(--card)) !important;
  border-radius: 12px !important;
  border: 1px solid hsl(var(--border)) !important;
  box-shadow: 0 1px 3px hsl(var(--foreground) / 0.05) !important;
}

.ant-card:hover {
  box-shadow: 0 4px 12px hsl(var(--foreground) / 0.08) !important;
}

.ant-card-head {
  background: transparent !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-card-head-title {
  color: hsl(var(--foreground)) !important;
}

.ant-card-body {
  color: hsl(var(--foreground)) !important;
}

/* ============================== */
/* Ant Design - Tags              */
/* ============================== */
.ant-tag {
  border-radius: 6px !important;
}

/* ============================== */
/* Ant Design - Inputs & Selects  */
/* ============================== */
.ant-input,
.ant-input-affix-wrapper,
.ant-select-selector,
.ant-input-number,
.ant-picker {
  background: hsl(var(--input-background)) !important;
  border-color: hsl(var(--border)) !important;
  border-radius: 8px !important;
  color: hsl(var(--foreground)) !important;
}

.ant-input::placeholder,
.ant-input-affix-wrapper input::placeholder,
.ant-picker input::placeholder {
  color: hsl(var(--muted-foreground)) !important;
}

.ant-input:focus,
.ant-input-affix-wrapper:focus,
.ant-input-affix-wrapper-focused,
.ant-select-focused .ant-select-selector,
.ant-picker-focused {
  border-color: hsl(var(--primary)) !important;
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.1) !important;
}

.ant-input-disabled,
.ant-input[disabled] {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--muted-foreground)) !important;
  border-color: hsl(var(--border)) !important;
}

/* ============================== */
/* Ant Design - Select Dropdown   */
/* ============================== */
.ant-select-dropdown {
  background: hsl(var(--popover)) !important;
  border: 1px solid hsl(var(--border)) !important;
  box-shadow: 0 10px 40px hsl(var(--foreground) / 0.15) !important;
}

.ant-select-item {
  color: hsl(var(--foreground)) !important;
}

.ant-select-item:hover {
  background: hsl(var(--muted)) !important;
}

.ant-select-item-option-selected {
  background: hsl(var(--primary) / 0.1) !important;
  color: hsl(var(--primary)) !important;
}

.ant-select-item-option-active {
  background: hsl(var(--muted)) !important;
}

/* Select input (closed state) */
.ant-select .ant-select-selector {
  background: hsl(var(--input-background)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-select-selection-item,
.ant-select-selection-placeholder {
  color: hsl(var(--foreground)) !important;
}

.ant-select-arrow,
.ant-select-clear {
  color: hsl(var(--muted-foreground)) !important;
}

.ant-select:not(.ant-select-disabled):hover .ant-select-selector {
  border-color: hsl(var(--primary)) !important;
}

/* ============================== */
/* Ant Design - Modal (CRITICAL)  */
/* ============================== */
.ant-modal .ant-modal-content,
.ant-modal-content {
  background: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
  border-radius: 16px !important;
  box-shadow: 0 20px 60px hsl(var(--foreground) / 0.25) !important;
}

.ant-modal-header {
  background: hsl(var(--card)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  border-radius: 16px 16px 0 0 !important;
}

.ant-modal-title {
  color: hsl(var(--foreground)) !important;
}

.ant-modal-close {
  color: hsl(var(--muted-foreground)) !important;
}

.ant-modal-close:hover {
  color: hsl(var(--foreground)) !important;
  background: hsl(var(--muted)) !important;
}

.ant-modal-body {
  background: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-modal-footer {
  background: hsl(var(--card)) !important;
  border-top: 1px solid hsl(var(--border)) !important;
  border-radius: 0 0 16px 16px !important;
}

.ant-modal-mask {
  background: hsl(var(--foreground) / 0.5) !important;
}

/* Some AntD builds wrap content in extra containers */
.ant-modal-root,
.ant-modal-wrap,
.ant-modal {
  color: hsl(var(--foreground)) !important;
  background: transparent !important;
}

/* Keep container from affecting modal theme */
.ant-modal-container {
  color: hsl(var(--foreground)) !important;
}

.ant-modal {
  padding-bottom: env(safe-area-inset-bottom) !important;
}

/* Template editor modal body padding (no inline styles) */
.template-editor-modal .ant-modal-body {
  padding: 16px 24px !important;
}

/* ============================== */
/* Ant Design - Table             */
/* ============================== */
.ant-table {
  background: transparent !important;
  color: hsl(var(--foreground)) !important;
}

.ant-table-thead > tr > th {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--foreground)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
}

.ant-table-tbody > tr > td {
  border-bottom: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-table-tbody > tr:hover > td {
  background: hsl(var(--muted) / 0.5) !important;
}

.ant-table-tbody > tr.ant-table-row:hover > td {
  background: hsl(var(--muted) / 0.5) !important;
}

/* ============================== */
/* Ant Design - Pagination        */
/* ============================== */
.ant-pagination-item,
.ant-pagination-prev .ant-pagination-item-link,
.ant-pagination-next .ant-pagination-item-link {
  background: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
}

.ant-pagination-item a {
  color: hsl(var(--foreground)) !important;
}

.ant-pagination-item:hover,
.ant-pagination-prev:hover .ant-pagination-item-link,
.ant-pagination-next:hover .ant-pagination-item-link {
  border-color: hsl(var(--primary)) !important;
}

.ant-pagination-item-active {
  background: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
}

.ant-pagination-item-active a {
  color: hsl(var(--primary-foreground)) !important;
}

.ant-pagination-prev button,
.ant-pagination-next button {
  color: hsl(var(--foreground)) !important;
}

.ant-pagination-disabled .ant-pagination-item-link,
.ant-pagination-disabled button {
  color: hsl(var(--muted-foreground)) !important;
  border-color: hsl(var(--border)) !important;
  background: hsl(var(--muted) / 0.35) !important;
}

.ant-pagination-jump-prev .ant-pagination-item-container,
.ant-pagination-jump-next .ant-pagination-item-container {
  color: hsl(var(--foreground)) !important;
}

/* ============================== */
/* Ant Design - Statistic         */
/* ============================== */
.ant-statistic-title {
  font-size: 13px !important;
  color: hsl(var(--muted-foreground)) !important;
}

.ant-statistic-content {
  font-size: 28px !important;
  color: hsl(var(--foreground)) !important;
}

.ant-statistic-content-value {
  color: inherit !important;
}

/* ============================== */
/* Ant Design - Tabs              */
/* ============================== */
.ant-tabs-tab {
  color: hsl(var(--muted-foreground)) !important;
}

.ant-tabs-tab:hover {
  color: hsl(var(--foreground)) !important;
}

.ant-tabs-tab-active .ant-tabs-tab-btn {
  color: hsl(var(--primary)) !important;
}

.ant-tabs-ink-bar {
  background: hsl(var(--primary)) !important;
}

.ant-tabs-nav::before {
  border-bottom-color: hsl(var(--border)) !important;
}

/* ============================== */
/* Ant Design - Form              */
/* ============================== */
.ant-form-item-label > label {
  color: hsl(var(--foreground)) !important;
}

.ant-form-item-explain-error {
  color: hsl(var(--destructive)) !important;
}

/* ============================== */
/* Ant Design - Drawer            */
/* ============================== */
.ant-drawer-content {
  background: hsl(var(--card)) !important;
}

.ant-drawer-header {
  background: hsl(var(--card)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
}

.ant-drawer-title {
  color: hsl(var(--foreground)) !important;
}

.ant-drawer-close {
  color: hsl(var(--muted-foreground)) !important;
}

.ant-drawer-close:hover {
  color: hsl(var(--foreground)) !important;
}

.ant-drawer-body {
  background: hsl(var(--card)) !important;
}

/* ============================== */
/* Ant Design - Segmented         */
/* ============================== */
.ant-segmented {
  background: hsl(var(--muted)) !important;
}

.ant-segmented-item {
  color: hsl(var(--foreground)) !important;
}

.ant-segmented-item-selected {
  background: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
}

/* ============================== */
/* Ant Design - Spin              */
/* ============================== */
.ant-spin-dot-item {
  background: hsl(var(--primary)) !important;
}

/* ============================== */
/* Ant Design - Empty             */
/* ============================== */
.ant-empty-description {
  color: hsl(var(--muted-foreground)) !important;
}

/* ============================== */
/* Ant Design - Typography        */
/* ============================== */
.ant-typography {
  color: hsl(var(--foreground)) !important;
}

.ant-typography.ant-typography-secondary {
  color: hsl(var(--muted-foreground)) !important;
}

h1.ant-typography,
h2.ant-typography,
h3.ant-typography,
h4.ant-typography,
h5.ant-typography {
  color: hsl(var(--foreground)) !important;
}

/* ============================== */
/* Ant Design - Slider            */
/* ============================== */
.ant-slider-track {
  background: hsl(var(--primary)) !important;
}

.ant-slider-handle::after {
  box-shadow: 0 0 0 2px hsl(var(--primary)) !important;
}

.ant-slider-rail {
  background: hsl(var(--muted)) !important;
}

/* ============================== */
/* Ant Design - Popover           */
/* ============================== */
.ant-popover-inner {
  background: hsl(var(--popover)) !important;
  box-shadow: 0 10px 40px hsl(var(--foreground) / 0.15) !important;
}

.ant-popover-arrow::before {
  background: hsl(var(--popover)) !important;
}

.ant-popover-title {
  color: hsl(var(--foreground)) !important;
  border-bottom-color: hsl(var(--border)) !important;
}

.ant-popover-inner-content {
  color: hsl(var(--foreground)) !important;
}

/* ============================== */
/* Ant Design - Popconfirm        */
/* ============================== */
.ant-popconfirm .ant-popover-inner {
  background: hsl(var(--popover)) !important;
}

.ant-popconfirm-message-title {
  color: hsl(var(--foreground)) !important;
}

.ant-popconfirm-description {
  color: hsl(var(--muted-foreground)) !important;
}

/* ============================== */
/* Ant Design - Message           */
/* ============================== */
.ant-message-notice-content {
  background: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
  box-shadow: 0 6px 24px hsl(var(--foreground) / 0.15) !important;
  border-radius: 8px !important;
}

/* ============================== */
/* Ant Design - Tooltip           */
/* ============================== */
.ant-tooltip-inner {
  background: hsl(var(--popover)) !important;
  color: hsl(var(--foreground)) !important;
  box-shadow: 0 4px 16px hsl(var(--foreground) / 0.15) !important;
}

.ant-tooltip-arrow::before {
  background: hsl(var(--popover)) !important;
}

/* ============================== */
/* Ant Design - Collapse          */
/* ============================== */
.ant-collapse {
  background: transparent !important;
  border-color: hsl(var(--border)) !important;
}

.ant-collapse-item {
  border-color: hsl(var(--border)) !important;
}

.ant-collapse-header {
  color: hsl(var(--foreground)) !important;
}

.ant-collapse-content {
  background: transparent !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.ant-collapse-ghost > .ant-collapse-item {
  border-color: hsl(var(--border)) !important;
}

/* ============================== */
/* Ant Design - Color Picker      */
/* ============================== */
.ant-color-picker-trigger {
  background: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
}

.ant-color-picker-panel {
  background: hsl(var(--popover)) !important;
}

/* ============================== */
/* Ant Design - Switch            */
/* ============================== */
.ant-switch {
  background: hsl(var(--muted-foreground)) !important;
}

.ant-switch-checked {
  background: hsl(var(--primary)) !important;
}

/* ============================== */
/* Ant Design - Divider           */
/* ============================== */
.ant-divider {
  border-color: hsl(var(--border)) !important;
}

.ant-divider-inner-text {
  color: hsl(var(--muted-foreground)) !important;
}

/* ============================== */
/* Ant Design - Avatar            */
/* ============================== */
.ant-avatar {
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

/* ============================== */
/* Ant Design - Dropdown          */
/* ============================== */
.ant-dropdown-menu {
  background: hsl(var(--popover)) !important;
  border: 1px solid hsl(var(--border)) !important;
  box-shadow: 0 10px 40px hsl(var(--foreground) / 0.15) !important;
}

.ant-dropdown-menu-item {
  color: hsl(var(--foreground)) !important;
}

.ant-dropdown-menu-item:hover {
  background: hsl(var(--muted)) !important;
}

/* ============================== */
/* Custom Scrollbar               */
/* ============================== */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* ============================== */
/* Animations                     */
/* ============================== */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* ============================== */
/* QR Card Template Styles        */
/* ============================== */
.qr-template-card {
  transition: all 0.2s ease;
  cursor: pointer;
}

.qr-template-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px hsl(var(--foreground) / 0.12);
}

.qr-template-card.selected {
  border: 2px solid hsl(var(--primary)) !important;
  box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
}

/* ============================== */
/* QR Creation Tabs               */
/* ============================== */
.qr-creation-tabs .ant-tabs-tab {
  padding: 12px 16px !important;
  margin: 0 !important;
  border-radius: 8px !important;
}

.qr-creation-tabs .ant-tabs-tab-active {
  background: hsl(var(--primary) / 0.1) !important;
}

.qr-creation-tabs .ant-tabs-ink-bar {
  display: none !important;
}

.qr-creation-tabs .ant-tabs-nav::before {
  border-bottom: 1px solid hsl(var(--border)) !important;
}

/* ============================== */
/* Profile Tabs                   */
/* ============================== */
.profile-tabs .ant-tabs-tab {
  padding: 12px 20px !important;
  margin: 0 4px 0 0 !important;
  border-radius: 8px 8px 0 0 !important;
  font-weight: 500 !important;
}

.profile-tabs .ant-tabs-tab-active {
  background: hsl(var(--primary) / 0.1) !important;
  color: hsl(var(--primary)) !important;
}

.profile-tabs .ant-tabs-ink-bar {
  display: none !important;
}

.profile-tabs .ant-tabs-content-holder {
  background: hsl(var(--background)) !important;
  border-radius: 0 8px 8px 8px !important;
  border-top: none !important;
}

/* ============================== */
/* Mobile App-like Styles         */
/* ============================== */
@media (max-width: 640px) {
  .ant-card {
    border-radius: 12px !important;
  }

  .ant-btn {
    border-radius: 8px !important;
  }

  .ant-modal-content {
    border-radius: 16px 16px 0 0 !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
  }

  .ant-modal-wrap {
    align-items: flex-end !important;
    display: flex !important;
  }

  .ant-modal {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Make small preview modals fit mobile */
  .qr-preview-modal .ant-modal {
    width: 100% !important;
    max-width: 520px !important;
  }

  .ant-drawer-content-wrapper {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* ============================== */
/* Mobile-first Utilities         */
/* ============================== */
.card-compact .ant-card-body {
  padding: 12px !important;
}

.avatar-primary {
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

.dashboard-mobile-drawer .ant-drawer-body {
  padding: 0 !important;
}

.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-inset-top {
  padding-top: env(safe-area-inset-top);
}

.chart-tooltip {
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: 10px;
  box-shadow: 0 10px 40px hsl(var(--foreground) / 0.15);
  padding: 10px 12px;
  color: hsl(var(--foreground));
}

@media (max-width: 640px) {
  .ant-card {
    border-radius: 12px !important;
  }

  .ant-btn {
    border-radius: 8px !important;
  }

  .ant-modal-content {
    border-radius: 16px 16px 0 0 !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
  }

  .ant-modal-wrap {
    align-items: flex-end !important;
    display: flex !important;
  }

  .ant-modal {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  .ant-drawer-content-wrapper {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* ============================== */
/* Touch-friendly Styles          */
/* ============================== */
@media (max-width: 1024px) {
  .ant-btn {
    min-height: 44px !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
  }

  .ant-input,
  .ant-select-selector {
    min-height: 44px !important;
  }

  .ant-tabs-tab {
    padding: 12px 16px !important;
  }
}
